(this["webpackJsonpkanban-app"]=this["webpackJsonpkanban-app"]||[]).push([[0],{42:function(e,a,t){e.exports=t(55)},47:function(e,a,t){},48:function(e,a,t){},55:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(16),s=t.n(l),o=(t(47),t(48),t(30),t(14)),c=t(35),m=t(12),i=t(58),u=t(59),d=t(10);var p,g,h=function(e){return r.a.createElement(d.a.Group,{className:"mb-2"},r.a.createElement(d.a.Label,null,e.label),r.a.createElement(d.a.Control,{key:e.id,type:e.type,name:e.name,id:e.id,placeholder:e.placeholder,label:e.label,value:e.value,onChange:e.changed}),r.a.createElement(d.a.Text,{className:"validation-message text-danger"},e.validationMesssage))},v=t(17),f=t(23);function b(){localStorage.hasOwnProperty("users")?p=JSON.parse(localStorage.users):(p=[],localStorage.users=JSON.stringify(p))}function E(){sessionStorage.hasOwnProperty("auth")?g=JSON.parse(sessionStorage.auth):(g={status:!1},sessionStorage.auth=JSON.stringify(g))}function w(){b(),E(),g.status=!1,g.user=null,sessionStorage.auth=JSON.stringify(g)}function N(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?N(t,!0).forEach((function(a){Object(f.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var S=function(e,a,t){var r=Object(n.useState)(e),l=Object(o.a)(r,2),s=l[0],c=l[1],m=Object(n.useState)(e),i=Object(o.a)(m,2),u=i[0],d=i[1];return{inputChangeHandler:function(e){c(y({},s,Object(f.a)({},e.target.name,e.target.value))),d(y({},u,Object(f.a)({},e.target.name,a[e.target.name](e.target.value))))},submitHandler:function(e){e.preventDefault();for(var n={},r=0,l=Object.entries(s);r<l.length;r++){var c=l[r],m=Object(o.a)(c,2),i=m[0],h=m[1];!0!==u&&(n[i]=a[i](h))}d(n);for(var v=!0,f=0,w=Object.values(u);f<w.length;f++){if(!0!==w[f])return void(v=!1)}!0===v&&(Object.keys(s).length>2?function(e){var a=e.userName,t=e.password,n=e.name,r=e.surname,l=e.birthDate,s=e.email,o=e.phone;b(),E();var c=!0,m=!1,i=void 0;try{for(var u,d=JSON.parse(localStorage.users)[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){if(a===u.value.userName)return console.log("username already exists"),!1}}catch(h){m=!0,i=h}finally{try{c||null==d.return||d.return()}finally{if(m)throw i}}p.push({phone:o,userName:a,password:t,birthDate:l,name:n,surname:r,email:s}),localStorage.users=JSON.stringify(p),g.status=!0,g.user=a,sessionStorage.auth=JSON.stringify(g),console.log("".concat(a," added successfully!"))}(s):function(e,a){b(),E();var t=!0,n=!1,r=void 0;try{for(var l,s=JSON.parse(localStorage.users)[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var o=l.value;if(e===o.userName&&a===o.password)return g.status=!0,g.user=e,sessionStorage.auth=JSON.stringify(g),console.log("Welcome, ".concat(e,"!")),!0}}catch(c){n=!0,r=c}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}console.log("User does not exist or something went wrong")}(s.userName,s.password),t())},values:s,errors:u}};var O=function(e){return!!e||"Please fill in this field"};var x=function(e){return!(!e||e.length<8)||"Passwords is at least 8 characters long"};var k=function(e){var a=S({userName:"",password:""},{userName:O,password:x},e.handleUserLogin),t=a.inputChangeHandler,n=a.submitHandler,l=a.values,s=a.errors;return r.a.createElement(d.a,{className:"main-form",onSubmit:n,noValidate:!0},r.a.createElement("div",{className:"col-sm-8 col-md-6 col-lg-4 m-auto"},r.a.createElement(h,{type:"text",name:"userName",placeholder:"User name",label:"User name",value:l.userName,validationMesssage:s.userName,changed:t})),r.a.createElement("div",{className:"col-sm-8 col-md-6 col-lg-4 m-auto"},r.a.createElement(h,{type:"password",name:"password",placeholder:"Password",label:"Password",value:l.password,validationMesssage:s.password,changed:t})),r.a.createElement(v.a,{className:"d-block mr-auto ml-auto mt-3 px-5",variant:"primary",type:"submit",onSubmit:n},"Submit"))};var j=function(e){return r.a.createElement("main",{className:"d-flex align-items-center"},r.a.createElement("div",{className:"form-wrapper container pb-5 mb-5"},r.a.createElement("div",{className:"title text-center"},r.a.createElement("h2",null,"Please sign in"),r.a.createElement("p",null,"Signin to manage your account.")),r.a.createElement(k,{handleUserLogin:e.handleUserLogin})))};var P=function(e){var a=r.a.createElement("p",null,"Please enter a ",r.a.createElement("strong",null,"valid")," E-mail address");return!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())||a};var D=function(e){var a=r.a.createElement("div",null,r.a.createElement("strong",null,"Password must contain:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Upper/Lower case Latin symbols"),r.a.createElement("li",null,"Numbers"),r.a.createElement("li",null,"One of this symbols: !#$%&? ")));return!!/^.*(?=.{8,})(?=.*[a-zA-Z])(?=.*\d)(?=.*[!#$%&? "]).*$/.test(e)||a};var L=function(e){var a=r.a.createElement("p",null,r.a.createElement("strong",null,"Name/Surname")," must be between 2 and 200 characters long");return!(!e||e.length<2||e.length>200)||a};var M=function(e){var a=r.a.createElement("div",null,"Username must contain ",r.a.createElement("strong",null,"Only Latin symbols")," and ",r.a.createElement("strong",null,"Numbers")),t=r.a.createElement("p",null,"Username must be between 2 and 200 characters long");return/[^a-zA-Z0-9]/.test(e)?a:!(!e||e.length<2||e.length>200)||t};var C=function(e){var a=r.a.createElement("div",null,"You must be at least ",r.a.createElement("strong",null,"18 years")," old"),t=e.split("-").map((function(e){return parseInt(e,10)})),n=new Date([t]),l=new Date;return 1e5*(l.getFullYear()-n.getFullYear())+100*(l.getMonth()-n.getMonth())+(l.getDate()-n.getDate())>=18e5||a};var J=function(e){var a=S({userName:"",name:"",surname:"",birthDate:"",email:"",phone:"",password:"",passwordConfirm:""},{userName:M,name:L,surname:L,birthDate:C,email:P,phone:O,password:D,passwordConfirm:O},e.handleUserLogin),t=a.inputChangeHandler,n=a.submitHandler,l=a.values,s=a.errors;return r.a.createElement(d.a,{className:"main-form",onSubmit:n,noValidate:!0},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-lg-4 offset-lg-2"},r.a.createElement(h,{type:"text",name:"userName",placeholder:"User name",label:"User name",value:l.userName,validationMesssage:s.userName,changed:t})),r.a.createElement("div",{className:"col-sm-6 col-lg-4"},r.a.createElement(h,{type:"email",name:"email",placeholder:"Email",label:"Email",value:l.email,validationMesssage:s.email,changed:t}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-lg-4 offset-lg-2"},r.a.createElement(h,{type:"text",name:"name",placeholder:"First name",label:"Name",value:l.name,validationMesssage:s.name,changed:t})),r.a.createElement("div",{className:"col-sm-6 col-lg-4"},r.a.createElement(h,{type:"text",name:"surname",placeholder:"Last name",label:"Surname",value:l.surname,validationMesssage:s.surname,changed:t}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-lg-4 offset-lg-2"},r.a.createElement(h,{type:"date",name:"birthDate",placeholder:"Birth Date",label:"Birth Date",value:l.birthDate,validationMesssage:s.birthDate,changed:t})),r.a.createElement("div",{className:"col-sm-6 col-lg-4"},r.a.createElement(h,{type:"number",name:"phone",placeholder:"Mobile phone",label:"Phone number",value:l.phone,validationMesssage:s.phone,changed:t}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-lg-4 offset-lg-2"},r.a.createElement(h,{type:"password",name:"password",placeholder:"Password",label:"Password",value:l.password,validationMesssage:s.password,changed:t})),r.a.createElement("div",{className:"col-sm-6 col-lg-4"},r.a.createElement(h,{type:"password",name:"passwordConfirm",placeholder:"Confirm password",label:"Confirm password",value:l.passwordConfirm,validationMesssage:s.passwordConfirm,changed:t}))),r.a.createElement(v.a,{className:"d-block mr-auto ml-auto mt-3 px-5",variant:"primary",type:"submit",onSubmit:n},"Submit"))};var U=function(e){return r.a.createElement("main",{className:"d-flex align-items-center"},r.a.createElement("div",{className:"form-wrapper container pb-5 mb-5"},r.a.createElement("div",{className:"title text-center"},r.a.createElement("h2",null,"Please sign up"),r.a.createElement("p",null,"Fill out the form to get started.")),r.a.createElement(J,{handleUserLogin:e.handleUserLogin})))};function T(){E();var e=r.a.useState(JSON.parse(sessionStorage.auth).status),a=Object(o.a)(e,2),t=a[0],n=a[1];function l(){n(JSON.parse(sessionStorage.auth).status)}var s=[{path:"/",linkText:"Sign in",component:j,exact:!0},{path:"/signup",linkText:"Sign up",component:U}],d=[{path:"/",linkText:"My lists",component:H,exact:!0},{path:"/",linkText:"Log out, ".concat(JSON.parse(sessionStorage.auth).user),component:H,onclick:w}],p=t?d:s;return r.a.createElement(c.a,null,r.a.createElement(i.a,{bg:"light",expand:"lg"},r.a.createElement(i.a.Brand,null,"Logo"),r.a.createElement(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(i.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(u.a,{className:"ml-auto"},p.map((function(e,a){return r.a.createElement(u.a.Link,{key:a,href:e.path,onClick:e.onclick},e.linkText)}))),r.a.createElement("div",{className:"custom-control custom-switch ml-4"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customSwitches"}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customSwitches"},"Switch mode")))),r.a.createElement(m.c,null,p.map((function(e,a){return r.a.createElement(m.a,{key:a,path:e.path,exact:e.exact},r.a.createElement(e.component,{handleUserLogin:l}))}))))}function H(){return r.a.createElement("h1",null,"MyLists")}var A=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.33721285.chunk.js.map